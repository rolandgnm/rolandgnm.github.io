"use strict";function _classCallCheck(t,s){if(!(t instanceof s))throw new TypeError("Cannot call a class as a function")}var CROSS_TURN=!0,nodesMatrix=[[],[],[]],initializeGame=function(){$(".field-cell").each(function(t,s){nodesMatrix[$(s).parent().data("id")].push(0),$(s).hasClass("cross")&&$(s).removeClass("cross"),$(s).hasClass("circle")&&$(s).removeClass("circle")}),nodesMatrix=nodesMatrix.splice(0,3),nodesMatrix=[[],[],[]],CROSS_TURN=!0},getNodeId=function(t){return{i:$(t).parent().data("id"),j:$(t).data("id")}};$(document).ready(function(){initializeGame(),$(".restart-button").on("click",function(){return initializeGame(),!1}),$(".field-cell").on("click",function(){var t=getNodeId(this);if(!nodesMatrix[t.i][t.j]){var s=$(this);CROSS_TURN?(s.hasClass("cross")&&s.removeClass("cross"),s.addClass("circle"),nodesMatrix[t.i][t.j]=1):(s.hasClass("circle")&&s.removeClass("circle"),s.addClass("cross"),nodesMatrix[t.i][t.j]=-1),CROSS_TURN=!CROSS_TURN}return!1})});var _createClass=function(){function t(t,s){for(var e=0;e<s.length;e++){var a=s[e];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(s,e,a){return e&&t(s.prototype,e),a&&t(s,a),s}}(),MoveEvaluation=function t(s,e){_classCallCheck(this,t),this.move=s,this.score=e},GameState=function(){function t(s){_classCallCheck(this,t),this.state=s.slice(0)}return _createClass(t,[{key:"isTerminalState",value:function(){return 0!==this.state[0]&&this.state[0]===this.state[1]&&this.state[1]===this.state[2]||0!==this.state[3]&&this.state[3]===this.state[4]&&this.state[4]===this.state[5]||0!==this.state[6]&&this.state[6]===this.state[7]&&this.state[7]===this.state[8]||0!==this.state[0]&&this.state[0]===this.state[3]&&this.state[3]===this.state[6]||0!==this.state[1]&&this.state[1]===this.state[4]&&this.state[4]===this.state[7]||0!==this.state[2]&&this.state[2]===this.state[5]&&this.state[5]===this.state[8]||0!==this.state[0]&&this.state[0]===this.state[4]&&this.state[4]===this.state[8]||0!==this.state[2]&&this.state[2]===this.state[4]&&this.state[4]===this.state[6]}},{key:"getNextValidMoves",value:function(){if(this.isTerminalState())return[];var t,s=[];for(t=0;t<this.state.length;t++)0===this.state[t]&&s.push(t);return s}},{key:"executeMove",value:function(t,s){this.state[t]=s}},{key:"undoMove",value:function(t){this.state[t]=0}},{key:"toString",value:function(){return this.state[0]+""+this.state[1]+this.state[2]+"\n"+this.state[3]+this.state[4]+this.state[5]+"\n"+this.state[6]+this.state[7]+this.state[8]}}]),t}(),Player=function(){function t(s,e){_classCallCheck(this,t),this.val=s,this.opponent=e}return _createClass(t,[{key:"eval",value:function(t){return this.stateArray=t.state,this.checkWin(this.val)?Number.MAX_SAFE_INTEGER:this.checkWin(this.opponent)?Number.MIN_SAFE_INTEGER:this.countOpenPaths(this.val,this.opponent)-this.countOpenPaths(this.opponent,this.val)}},{key:"checkWin",value:function(t){return this.stateArray[0]===t&&this.stateArray[1]===t&&this.stateArray[2]===t||this.stateArray[3]===t&&this.stateArray[4]===t&&this.stateArray[5]===t||this.stateArray[6]===t&&this.stateArray[7]===t&&this.stateArray[8]===t||this.stateArray[0]===t&&this.stateArray[3]===t&&this.stateArray[6]===t||this.stateArray[1]===t&&this.stateArray[4]===t&&this.stateArray[7]===t||this.stateArray[2]===t&&this.stateArray[5]===t&&this.stateArray[8]===t||this.stateArray[0]===t&&this.stateArray[4]===t&&this.stateArray[8]===t||this.stateArray[2]===t&&this.stateArray[4]===t&&this.stateArray[6]===t}},{key:"countBLockedPaths",value:function(t){var s=0;return this.stateArray[0]!==t&&this.stateArray[1]!==t&&this.stateArray[2]!==t||s++,this.stateArray[3]!==t&&this.stateArray[4]!==t&&this.stateArray[5]!==t||s++,this.stateArray[6]!==t&&this.stateArray[7]!==t&&this.stateArray[8]!==t||s++,this.stateArray[0]!==t&&this.stateArray[3]!==t&&this.stateArray[6]!==t||s++,this.stateArray[1]!==t&&this.stateArray[4]!==t&&this.stateArray[7]!==t||s++,this.stateArray[2]!==t&&this.stateArray[5]!==t&&this.stateArray[8]!==t||s++,this.stateArray[0]!==t&&this.stateArray[4]!==t&&this.stateArray[8]!==t||s++,this.stateArray[2]!==t&&this.stateArray[4]!==t&&this.stateArray[6]!==t||s++,s}},{key:"countOpenPaths",value:function(t,s){var e=8;return e-this.countBLockedPaths(s)}}]),t}(),Alphabeta=function(){function t(s){_classCallCheck(this,t),this.ply=s}return _createClass(t,[{key:"bestMove",value:function(t,s,e){this.state=new GameState(t.state);var a=this.alphabeta(this.ply,s,e,Number.MIN_SAFE_INTEGER,Number.MAX_SAFE_INTEGER);return a.move}},{key:"alphabeta",value:function(t,s,e,a,i){var r=this.state,n=r.getNextValidMoves();if(0===t||!n.length)return new MoveEvaluation(void 0,s.eval(r));for(var h=new MoveEvaluation(void 0,a);n.length;){var o=n.shift();r.executeMove(o,s.val);var l=this.alphabeta(t-1,e,s,-i,-a);if(r.undoMove(o),-l.score>a&&(a=-l.score,h=new MoveEvaluation(o,a)),a>=i)return h}return h}}]),t}(),control={};control.vState=[0,0,0,0,0,0,0,0,0],control.human=new Player(1,2),control.comp=new Player(2,1),control.min=new Alphabeta(8),control.gameState=new GameState(control.vState),control.CnextMove=control.min.bestMove(control.gameState,control.comp,control.human),console.log("%cC "+control.CnextMove,"color:orange;font-size: 16pt");